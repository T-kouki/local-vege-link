{% extends 'eat_base.html' %}

{% load static %}

{% block content %}
<div class="item-detail">

  <!-- 左側：商品画像 -->
  <div class="item-images">
    {% if item.image %}
      <img src="{{ item.image.url }}" alt="{{ item.name }}">
    {% else %}
      <img src="{% static 'images/noimage.png' %}" alt="画像なし">
    {% endif %}
  </div>

  <!-- 右側：商品情報 -->
  <div class="item-info">
    <h1>{{ item.name }}</h1>
    <h2>¥{{ item.price }}</h2>

    <div class="farmer-info">
      <div class="farmer-profile">
        {% if item.user.profile_image %}
          <img src="{{ item.user.profile_image.url }}" alt="農家プロフィール画像">
        {% else %}
          <img src="{% static 'images/default_user.png' %}" alt="プロフィールなし">
        {% endif %}
      </div>

      <div class="farmer-name">
        <p>
          <a href="{% url 'polls:farm_detail' item.user.id %}">
            {{ item.user.nickname }}
          </a>
        </p>
      </div>

      <div class="farmer-rating">
        <p>評価（平均）：準備中</p>
      </div>
    </div>

    <div class="item-description">
      <p>{{ item.description|linebreaksbr }}</p>
    </div>

    <div class="add-to-cart">
      <form method="post" action="{% url 'polls:add_to_cart' item.id %}">
        {% csrf_token %}
        <button type="submit" class="cart-button">カートに入れる</button>
      </form>
    </div>

  </div>
</div>
{% endblock %}
